# Staging environment values for Mykadoo
# Override default values for staging deployment

global:
  environment: staging
  domain: staging.mykadoo.com

# Reduced replica counts for staging
replicaCount:
  web: 2
  api: 2

# Use staging image tags
image:
  tag: staging

# Ingress for staging
ingress:
  enabled: true
  hosts:
    - host: staging.mykadoo.com
      paths:
        - path: /
          pathType: Prefix
          service: web
    - host: api.staging.mykadoo.com
      paths:
        - path: /
          pathType: Prefix
          service: api
  tls:
    - secretName: mykadoo-staging-tls
      hosts:
        - staging.mykadoo.com
        - api.staging.mykadoo.com

# Reduced resources for staging
resources:
  web:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "250m"
  api:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"

# Reduced autoscaling for staging
autoscaling:
  web:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
  api:
    enabled: true
    minReplicas: 2
    maxReplicas: 5

# Smaller database for staging
postgresql:
  primary:
    persistence:
      size: 10Gi
    resources:
      requests:
        memory: "128Mi"
        cpu: "100m"
      limits:
        memory: "256Mi"
        cpu: "250m"

# Smaller Redis for staging
redis:
  master:
    persistence:
      size: 4Gi
    resources:
      requests:
        memory: "64Mi"
        cpu: "50m"
      limits:
        memory: "128Mi"
        cpu: "100m"

# Environment variables
env:
  NODE_ENV: staging
